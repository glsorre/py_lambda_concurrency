<html>
	<head>
        <link rel="stylesheet" href="https://cdn.rawgit.com/hakimel/reveal.js/3.9.2/css/reset.css">
		<link rel="stylesheet" href="https://cdn.rawgit.com/hakimel/reveal.js/3.9.2/css/reveal.css">
        <link rel="stylesheet" href="https://cdn.rawgit.com/hakimel/reveal.js/3.9.2/css/theme/white.css">
        <link rel="stylesheet" href="https://cdn.rawgit.com/hakimel/reveal.js/master/lib/css/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-markdown>
                    <textarea data-template>
                        ## Unleash the power of concurrency in AWS lambdas
                
                        How, when and if use python concurrency in AWS lambdas
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        ### Agenda
                
                        - introduction to AWS lambdas
                        - tasks: CPU and I/O bounded 
                        - python concurrency: threads and processes
                        - code diving
                        - data presentation
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### AWS lambdas

                        > lets you run code without provisioning or managing servers
                        serverless
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### AWS lambdas

                        15 minutes limit
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### AWS lambdas

                        scalable
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### AWS lambdas

                        python first-citizen
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### AWS lambdas

                        performance grow with memory assigned
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### Tasks

                        > a task is CPU bound if it would go faster if the CPU were faster
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### Tasks

                        > a task is I/O bound if it would go faster if the I/O subsystem was faster
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### Tasks

                        $$ O(n^2) $$ selection sort

                        $$ O(\log{}n) $$ quick sort
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### Python Concurrency

                        - threads
                        - processes
                        - asyncio
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### Python Concurrency

                        ##### threads
                        
                        lightweight
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### Python Concurrency

                        ##### threads
                        
                        shares memory
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### Python Concurrency

                        ##### threads
                        
                        inside the GIL
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### Python Concurrency

                        ##### processes
                        
                        separate memory space
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### Python Concurrency

                        ##### processes
                        
                        can use multiple CPU cores
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### Python Concurrency

                        ##### processes
                        
                        outside the GIL
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### Python Concurrency

                        concurrent.futures:
                        - ThreadPoolExecutor
                        - ~~ProcessPoolExecutor~~
                    </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        #### Python Concurrency

                        ```
from multiprocessing import Process
from threading import current_thread, Thread
from queue import Queue

def _run(q):
    while True:
        p = q.get()
        if p is None:
            break
        p.start()
        p._popen.wait()
        q.task_done()

class Pool:
    def __init__(self, max_workers):
        self.max_workers = max_workers
        self.threads = []
        self.queue = Queue()

    def map(self, func, args):
        for i in range(self.max_workers):
            t = Thread(target=_run, args=(self.queue, ))
            t.start()
            self.threads.append(t)

        for a in args:
            self.queue.put(Process(target=func, args=(a, )))

        self.queue.join()

        for i in range(self.max_workers):
            self.queue.put(None)

    def close(self):
        for t in self.threads:
            t.join()
                        ```
                    </textarea>
                </section>
			</div>
		</div>
        <script src="https://cdn.rawgit.com/hakimel/reveal.js/3.9.2/js/reveal.js"></script>
        <script src="https://cdn.rawgit.com/hakimel/reveal.js/3.9.2/plugin/markdown/marked.js"></script>
        <script src="https://cdn.rawgit.com/hakimel/reveal.js/3.9.2/plugin/markdown/markdown.js"></script>
		<script>
			Reveal.initialize({
                // Options which are passed into marked
                // See https://marked.js.org/#/USING_ADVANCED.md#options
                hash: true,
                markdown: {
                    smartypants: true
                },
                math: {
                    mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
                    config: 'TeX-AMS_HTML-full', // See http://docs.mathjax.org/en/latest/config-files.html
                    // pass other options into `MathJax.Hub.Config()`
                    TeX: { Macros: { RR: "{\\bf R}" } }
                },
                dependencies: [
                    { src: 'https://cdn.rawgit.com/hakimel/reveal.js/3.9.2/plugin/math/math.js', async: true },
                    { src: 'https://cdn.rawgit.com/hakimel/reveal.js/3.9.2/plugin/highlight/highlight.js', async: true }
                ]
            });
		</script>
	</body>
</html>